{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///R:/SHRIRAKSH/Student_Routine_optimizer/Student_Routine_optimizer/frontend/pages/login.js"],"sourcesContent":["// pages/login.js\r\nimport Head from 'next/head';\r\nimport { useState } from 'react';\r\nimport { useRouter } from 'next/router';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Eye, EyeOff } from 'lucide-react';\r\nimport { API_BASE, HERO_IMAGE_BACKEND } from '../components/api';\r\n\r\n/* ================= PAGE ================= */\r\n\r\nexport default function LoginPage() {\r\n  const router = useRouter();\r\n\r\n  const [theme, setTheme] = useState('dark');\r\n  const isDark = theme === 'dark';\r\n\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [showPwd, setShowPwd] = useState(false);\r\n\r\n  const [err, setErr] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  /* SAFE JSON */\r\n  async function safeFetchJSON(res) {\r\n    const contentType = res.headers.get('content-type') || '';\r\n    const text = await res.text();\r\n\r\n    if (!contentType.includes('application/json')) {\r\n      throw new Error('Server returned invalid response');\r\n    }\r\n    return text ? JSON.parse(text) : {};\r\n  }\r\n\r\n  async function handleSubmit(e) {\r\n    e.preventDefault();\r\n    setErr('');\r\n    setLoading(true);\r\n\r\n    if (!email || !password) {\r\n      setErr('Email and password are required');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const res = await fetch(`${API_BASE}/api/auth/login`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        credentials: 'include',\r\n        body: JSON.stringify({ email, password }),\r\n      });\r\n\r\n      const body = await safeFetchJSON(res);\r\n      if (!res.ok) throw new Error(body.error || body.message);\r\n\r\n      router.replace('/');\r\n    } catch (e) {\r\n      setErr(e.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Head>\r\n        <title>Login â€” Student Optimizer</title>\r\n      </Head>\r\n\r\n      <div\r\n        className={`min-h-screen flex items-center justify-center relative overflow-hidden px-4 transition-colors duration-500 ${\r\n          isDark ? 'bg-[#05060f]' : 'bg-slate-100'\r\n        }`}\r\n      >\r\n        {/* Ambient glow */}\r\n        <div className=\"absolute -top-40 -left-40 w-96 h-96 bg-cyan-500/20 blur-3xl rounded-full\" />\r\n        <div className=\"absolute bottom-0 right-0 w-96 h-96 bg-fuchsia-600/20 blur-3xl rounded-full\" />\r\n\r\n        {/* Theme Toggle */}\r\n        <motion.button\r\n          whileTap={{ scale: 0.9 }}\r\n          onClick={() => setTheme(isDark ? 'light' : 'dark')}\r\n          className=\"absolute top-6 right-6 text-sm px-3 py-1 rounded-full border border-cyan-400/40 text-cyan-400\"\r\n        >\r\n          {isDark ? 'Light mode' : 'Dark mode'}\r\n        </motion.button>\r\n\r\n        {/* Card */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 30, scale: 0.95 }}\r\n          animate={{ opacity: 1, y: 0, scale: 1 }}\r\n          transition={{ duration: 0.6 }}\r\n          className={`relative w-full max-w-md backdrop-blur-xl rounded-2xl shadow-2xl p-8 border ${\r\n            isDark\r\n              ? 'bg-white/5 border-white/10 text-white'\r\n              : 'bg-white border-slate-300 text-slate-900'\r\n          }`}\r\n        >\r\n          {/* Header */}\r\n          <div className=\"flex flex-col items-center mb-8 text-center\">\r\n            <img\r\n              src={HERO_IMAGE_BACKEND}\r\n              className=\"w-20 h-20 rounded-xl border border-cyan-400/40 shadow-lg\"\r\n            />\r\n            <h1 className=\"text-3xl font-bold mt-4 text-cyan-400\">\r\n              Welcome Back\r\n            </h1>\r\n            <p className=\"text-sm opacity-70\">\r\n              Log in to continue your journey\r\n            </p>\r\n          </div>\r\n\r\n          {/* Form */}\r\n          <form onSubmit={handleSubmit} className=\"space-y-5\">\r\n\r\n            <input\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              placeholder=\"Email Address\"\r\n              className=\"input\"\r\n            />\r\n\r\n            {/* Password with toggle */}\r\n            <div className=\"relative\">\r\n              <input\r\n                type={showPwd ? 'text' : 'password'}\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n                placeholder=\"Password\"\r\n                className=\"input pr-10\"\r\n              />\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setShowPwd(v => !v)}\r\n                className=\"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400\"\r\n              >\r\n                {showPwd ? <EyeOff size={18} /> : <Eye size={18} />}\r\n              </button>\r\n            </div>\r\n\r\n            {/* Error */}\r\n            <AnimatePresence>\r\n              {err && (\r\n                <motion.div\r\n                  initial={{ x: 0, opacity: 0 }}\r\n                  animate={{ x: [-6, 6, -4, 4, 0], opacity: 1 }}\r\n                  exit={{ opacity: 0 }}\r\n                  className=\"text-red-300 bg-red-500/20 border border-red-400/30 p-2 rounded-lg text-sm\"\r\n                >\r\n                  {err}\r\n                </motion.div>\r\n              )}\r\n            </AnimatePresence>\r\n\r\n            {/* Submit */}\r\n            <button\r\n              type=\"submit\"\r\n              disabled={loading}\r\n              className=\"w-full py-3 rounded-lg bg-gradient-to-r from-cyan-500 to-fuchsia-600 text-black font-semibold\"\r\n            >\r\n              {loading ? (\r\n                <div className=\"h-5 w-24 mx-auto rounded bg-white/30 animate-pulse\" />\r\n              ) : (\r\n                'Login'\r\n              )}\r\n            </button>\r\n\r\n            {/* Register */}\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => router.push('/register')}\r\n              className=\"w-full py-3 rounded-lg border border-cyan-400/40 text-cyan-400 hover:bg-cyan-400/10\"\r\n            >\r\n              Create new account\r\n            </button>\r\n          </form>\r\n        </motion.div>\r\n      </div>\r\n\r\n      {/* Styles */}\r\n      <style jsx>{`\r\n        .input {\r\n          width: 100%;\r\n          padding: 0.75rem;\r\n          border-radius: 0.5rem;\r\n          background: rgba(255,255,255,0.1);\r\n          border: 1px solid rgba(255,255,255,0.2);\r\n          color: inherit;\r\n          outline: none;\r\n        }\r\n        .input:focus {\r\n          border-color: #22d3ee;\r\n        }\r\n      `}</style>\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}