{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///R:/SHRIRAKSH/Student_Routine_optimizer/Student_Routine_optimizer/frontend/pages/register.js"],"sourcesContent":["// pages/register.js\r\nimport Head from 'next/head';\r\nimport { useState } from 'react';\r\nimport { useRouter } from 'next/router';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Eye, EyeOff } from 'lucide-react';\r\nimport { API_BASE, HERO_IMAGE_BACKEND } from '../components/api';\r\n\r\n/* ================= HELPERS ================= */\r\n\r\nfunction getPasswordStrength(password) {\r\n  let score = 0;\r\n  if (password.length >= 6) score++;\r\n  if (/[A-Z]/.test(password)) score++;\r\n  if (/[0-9]/.test(password)) score++;\r\n  if (/[^A-Za-z0-9]/.test(password)) score++;\r\n  return score;\r\n}\r\n\r\nconst strengthColors = [\r\n  'bg-red-500',\r\n  'bg-orange-500',\r\n  'bg-yellow-500',\r\n  'bg-cyan-500',\r\n  'bg-green-500',\r\n];\r\n\r\nconst strengthText = ['Very weak', 'Weak', 'Okay', 'Strong', 'Very strong'];\r\n\r\n/* ================= PAGE ================= */\r\n\r\nexport default function RegisterPage() {\r\n  const router = useRouter();\r\n\r\n  const [theme, setTheme] = useState('dark');\r\n  const isDark = theme === 'dark';\r\n\r\n  const [name, setName] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [showPwd, setShowPwd] = useState(false);\r\n\r\n  const [err, setErr] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const strength = getPasswordStrength(password);\r\n\r\n  async function safeFetchJSON(res) {\r\n    const text = await res.text();\r\n    try {\r\n      return text ? JSON.parse(text) : {};\r\n    } catch {\r\n      throw new Error(`Server error (${res.status})`);\r\n    }\r\n  }\r\n\r\n  async function handleSubmit(e) {\r\n    e.preventDefault();\r\n    setErr('');\r\n    setSuccess('');\r\n    setLoading(true);\r\n\r\n    if (!name || !email || !password) {\r\n      setErr('All fields are required');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const res = await fetch(`${API_BASE}/api/auth/register`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        credentials: 'include',\r\n        body: JSON.stringify({ name, email, password }),\r\n      });\r\n\r\n      const body = await safeFetchJSON(res);\r\n      if (!res.ok) throw new Error(body.error || body.message);\r\n\r\n      setSuccess('Account created! Verify your email.');\r\n      setTimeout(() => router.replace('/verify-email'), 1200);\r\n    } catch (e) {\r\n      setErr(e.message || 'Registration failed');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Head>\r\n        <title>Register â€” Student Optimizer</title>\r\n      </Head>\r\n\r\n      <div\r\n        className={`min-h-screen flex items-center justify-center relative overflow-hidden px-4 transition-colors duration-500 ${\r\n          isDark ? 'bg-[#05060f]' : 'bg-slate-100'\r\n        }`}\r\n      >\r\n        {/* Ambient glow */}\r\n        <div className=\"absolute -top-40 -left-40 w-96 h-96 bg-cyan-500/20 blur-3xl rounded-full\" />\r\n        <div className=\"absolute bottom-0 right-0 w-96 h-96 bg-fuchsia-600/20 blur-3xl rounded-full\" />\r\n\r\n        {/* Theme Toggle */}\r\n        <motion.button\r\n          whileTap={{ scale: 0.9 }}\r\n          onClick={() => setTheme(isDark ? 'light' : 'dark')}\r\n          className=\"absolute top-6 right-6 text-sm px-3 py-1 rounded-full border border-cyan-400/40 text-cyan-400\"\r\n        >\r\n          {isDark ? 'Light mode' : 'Dark mode'}\r\n        </motion.button>\r\n\r\n        {/* Card */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 30, scale: 0.95 }}\r\n          animate={{ opacity: 1, y: 0, scale: 1 }}\r\n          transition={{ duration: 0.6 }}\r\n          className={`relative w-full max-w-md backdrop-blur-xl rounded-2xl shadow-2xl p-8 border ${\r\n            isDark\r\n              ? 'bg-white/5 border-white/10 text-white'\r\n              : 'bg-white border-slate-300 text-slate-900'\r\n          }`}\r\n        >\r\n          {/* Header */}\r\n          <div className=\"flex flex-col items-center mb-8 text-center\">\r\n            <img\r\n              src={HERO_IMAGE_BACKEND}\r\n              className=\"w-20 h-20 rounded-xl border border-cyan-400/40 shadow-lg\"\r\n            />\r\n            <h1 className=\"text-3xl font-bold mt-4 text-cyan-400\">\r\n              Create Account\r\n            </h1>\r\n            <p className=\"text-sm opacity-70\">\r\n              Join the AI-powered study system\r\n            </p>\r\n          </div>\r\n\r\n          {/* Form */}\r\n          <form onSubmit={handleSubmit} className=\"space-y-5\">\r\n\r\n            <input\r\n              value={name}\r\n              onChange={(e) => setName(e.target.value)}\r\n              placeholder=\"Full Name\"\r\n              className=\"input\"\r\n            />\r\n\r\n            <input\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              placeholder=\"Email Address\"\r\n              className=\"input\"\r\n            />\r\n\r\n            {/* Password with toggle */}\r\n            <div className=\"relative\">\r\n              <input\r\n                type={showPwd ? 'text' : 'password'}\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n                placeholder=\"Password\"\r\n                className=\"input pr-10\"\r\n              />\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setShowPwd(v => !v)}\r\n                className=\"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400\"\r\n              >\r\n                {showPwd ? <EyeOff size={18} /> : <Eye size={18} />}\r\n              </button>\r\n            </div>\r\n\r\n            {/* Password Strength */}\r\n            {password && (\r\n              <div>\r\n                <div className=\"h-2 w-full bg-slate-700/40 rounded overflow-hidden\">\r\n                  <motion.div\r\n                    initial={{ width: 0 }}\r\n                    animate={{ width: `${(strength / 4) * 100}%` }}\r\n                    className={`h-full ${strengthColors[strength]}`}\r\n                  />\r\n                </div>\r\n                <p className=\"text-xs mt-1 opacity-70\">\r\n                  Strength: {strengthText[strength]}\r\n                </p>\r\n              </div>\r\n            )}\r\n\r\n            {/* Error Shake */}\r\n            <AnimatePresence>\r\n              {err && (\r\n                <motion.div\r\n                  initial={{ x: 0, opacity: 0 }}\r\n                  animate={{ x: [-6, 6, -4, 4, 0], opacity: 1 }}\r\n                  exit={{ opacity: 0 }}\r\n                  className=\"text-red-300 bg-red-500/20 border border-red-400/30 p-2 rounded-lg text-sm\"\r\n                >\r\n                  {err}\r\n                </motion.div>\r\n              )}\r\n            </AnimatePresence>\r\n\r\n            {/* Success */}\r\n            {success && (\r\n              <div className=\"text-green-300 bg-green-500/20 border border-green-400/30 p-2 rounded-lg text-sm\">\r\n                {success}\r\n              </div>\r\n            )}\r\n\r\n            {/* Submit / Loading */}\r\n            <button\r\n              type=\"submit\"\r\n              disabled={loading}\r\n              className=\"w-full py-3 rounded-lg bg-gradient-to-r from-cyan-500 to-fuchsia-600 text-black font-semibold\"\r\n            >\r\n              {loading ? (\r\n                <div className=\"h-5 w-24 mx-auto rounded bg-white/30 animate-pulse\" />\r\n              ) : (\r\n                'Register'\r\n              )}\r\n            </button>\r\n\r\n            {/* OAuth Divider */}\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"flex-1 h-px bg-slate-700\" />\r\n              <span className=\"text-xs text-slate-400\">OR</span>\r\n              <div className=\"flex-1 h-px bg-slate-700\" />\r\n            </div>\r\n\r\n            {/* OAuth UI */}\r\n            <button type=\"button\" className=\"oauth-btn\">\r\n              <img src=\"/google.svg\" className=\"w-5 h-5\" />\r\n              Continue with Google\r\n            </button>\r\n\r\n            <button type=\"button\" className=\"oauth-btn\">\r\n              <img src=\"/github.svg\" className=\"w-5 h-5\" />\r\n              Continue with GitHub\r\n            </button>\r\n\r\n            {/* Login */}\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => router.push('/login')}\r\n              className=\"w-full py-3 rounded-lg border border-cyan-400/40 text-cyan-400 hover:bg-cyan-400/10\"\r\n            >\r\n              Already have an account? Login\r\n            </button>\r\n          </form>\r\n        </motion.div>\r\n      </div>\r\n\r\n      {/* Styles */}\r\n      <style jsx>{`\r\n        .input {\r\n          width: 100%;\r\n          padding: 0.75rem;\r\n          border-radius: 0.5rem;\r\n          background: rgba(255,255,255,0.1);\r\n          border: 1px solid rgba(255,255,255,0.2);\r\n          color: inherit;\r\n          outline: none;\r\n        }\r\n        .input:focus {\r\n          border-color: #22d3ee;\r\n        }\r\n        .oauth-btn {\r\n          width: 100%;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          gap: 0.5rem;\r\n          padding: 0.75rem;\r\n          border-radius: 0.5rem;\r\n          border: 1px solid rgba(255,255,255,0.2);\r\n          background: rgba(255,255,255,0.05);\r\n          color: inherit;\r\n        }\r\n        .oauth-btn:hover {\r\n          background: rgba(255,255,255,0.1);\r\n        }\r\n      `}</style>\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}